From 73f893117a273db351a6a2cf50b817b6ea3f1735 Mon Sep 17 00:00:00 2001
From: Florent Pirou <florent.pirou@intel.com>
Date: Fri, 16 Jan 2026 08:41:24 -0700
Subject: [PATCH 71/77] Revert "media: intel/ipu6: Constify ipu6_buttress_ctrl
 structure"

This reverts commit 6ad57f8f86de024d10c764f829a50530e7121958.

Signed-off-by: Florent Pirou <florent.pirou@intel.com>
---
 6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.c      | 2 +-
 6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.h      | 4 ++--
 6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.c | 4 ++--
 6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.h | 4 ++--
 4 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.c b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.c
index 5cee274..37d88dd 100644
--- a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.c
+++ b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.c
@@ -82,7 +82,7 @@ static void ipu6_bus_release(struct device *dev)
 
 struct ipu6_bus_device *
 ipu6_bus_initialize_device(struct pci_dev *pdev, struct device *parent,
-			   void *pdata, const struct ipu6_buttress_ctrl *ctrl,
+			   void *pdata, struct ipu6_buttress_ctrl *ctrl,
 			   char *name)
 {
 	struct auxiliary_device *auxdev;
diff --git a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.h b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.h
index 16be932..73dcf73 100644
--- a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.h
+++ b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-bus.h
@@ -27,7 +27,7 @@ struct ipu6_bus_device {
 	struct ipu6_mmu *mmu;
 	struct ipu6_device *isp;
 	struct ipu_subsystem_trace_config *trace_cfg;
-	const struct ipu6_buttress_ctrl *ctrl;
+	struct ipu6_buttress_ctrl *ctrl;
 	const struct firmware *fw;
 	struct sg_table fw_sgt;
 	u64 *pkg_dir;
@@ -49,7 +49,7 @@ struct ipu6_auxdrv_data {
 
 struct ipu6_bus_device *
 ipu6_bus_initialize_device(struct pci_dev *pdev, struct device *parent,
-			   void *pdata, const struct ipu6_buttress_ctrl *ctrl,
+			   void *pdata, struct ipu6_buttress_ctrl *ctrl,
 			   char *name);
 int ipu6_bus_add_device(struct ipu6_bus_device *adev);
 void ipu6_bus_del_devices(struct pci_dev *pdev);
diff --git a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.c b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.c
index c243142..0a7b019 100644
--- a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.c
+++ b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.c
@@ -445,8 +445,8 @@ irqreturn_t ipu6_buttress_isr_threaded(int irq, void *isp_ptr)
 	return ret;
 }
 
-int ipu6_buttress_power(struct device *dev,
-			const struct ipu6_buttress_ctrl *ctrl, bool on)
+int ipu6_buttress_power(struct device *dev, struct ipu6_buttress_ctrl *ctrl,
+			bool on)
 {
 	struct ipu6_device *isp = to_ipu6_bus_device(dev)->isp;
 	u32 pwr_sts, val;
diff --git a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.h b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.h
index 8bc5eeb..3b22dfb 100644
--- a/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.h
+++ b/6.18.0/drivers/media/pci/intel/ipu6/ipu6-buttress.h
@@ -65,8 +65,8 @@ int ipu6_buttress_map_fw_image(struct ipu6_bus_device *sys,
 			       struct sg_table *sgt);
 void ipu6_buttress_unmap_fw_image(struct ipu6_bus_device *sys,
 				  struct sg_table *sgt);
-int ipu6_buttress_power(struct device *dev,
-			const struct ipu6_buttress_ctrl *ctrl, bool on);
+int ipu6_buttress_power(struct device *dev, struct ipu6_buttress_ctrl *ctrl,
+			bool on);
 bool ipu6_buttress_get_secure_mode(struct ipu6_device *isp);
 int ipu6_buttress_authenticate(struct ipu6_device *isp);
 int ipu6_buttress_reset_authentication(struct ipu6_device *isp);
-- 
2.43.0


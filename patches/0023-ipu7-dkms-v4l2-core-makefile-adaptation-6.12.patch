From 8fe1a4467308a5bc10777ecbc95f5b660f566763 Mon Sep 17 00:00:00 2001
From: florent pirou <florent.pirou@intel.com>
Date: Mon, 17 Nov 2025 07:44:33 -0700
Subject: [PATCH 23/28] ipu7 dkms : v4l2-core makefile adaptation 6.12

Signed-off-by: florent pirou <florent.pirou@intel.com>
---
 6.12.0/drivers/media/v4l2-core/Makefile   | 3 +++
 6.12.0/drivers/media/v4l2-core/v4l2-dev.c | 1 +
 2 files changed, 4 insertions(+)

diff --git a/6.12.0/drivers/media/v4l2-core/Makefile b/6.12.0/drivers/media/v4l2-core/Makefile
index 2177b9d..82c235f 100644
--- a/6.12.0/drivers/media/v4l2-core/Makefile
+++ b/6.12.0/drivers/media/v4l2-core/Makefile
@@ -2,6 +2,9 @@
 #
 # Makefile for the V4L2 core
 #
+# ipu7-dkms appendix
+CC := ${CC} -I ${M}/../../../include-overrides -I ${M}/../tuners -I ${M}/../dvb-core -I ${M}/../dvb-frontends
+ccflags-y := -DDRIVER_VERSION_SUFFIX=\"${DRIVER_VERSION_SUFFIX}\"
 
 ccflags-y += -I$(srctree)/drivers/media/dvb-frontends
 ccflags-y += -I$(srctree)/drivers/media/tuners
diff --git a/6.12.0/drivers/media/v4l2-core/v4l2-dev.c b/6.12.0/drivers/media/v4l2-core/v4l2-dev.c
index 3d7711c..7b3e462 100644
--- a/6.12.0/drivers/media/v4l2-core/v4l2-dev.c
+++ b/6.12.0/drivers/media/v4l2-core/v4l2-dev.c
@@ -1231,3 +1231,4 @@ MODULE_AUTHOR("Alan Cox, Mauro Carvalho Chehab <mchehab@kernel.org>, Bill Dirks,
 MODULE_DESCRIPTION("Video4Linux2 core driver");
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_CHARDEV_MAJOR(VIDEO_MAJOR);
+MODULE_VERSION(DRIVER_VERSION_SUFFIX);
-- 
2.43.0

